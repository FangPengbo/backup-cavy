import{S as a}from"./vue-schart.4598c71b.js";import{B as e,r as t,o as l,e as s,h as o,w as d,g as i,t as n,C as r,p as u,j as c}from"./vendor.6c36e4e7.js";import{D as v}from"./index.236993a1.js";import{_ as p}from"./index.a811416a.js";const g={name:"dashboard",components:{Schart:a},setup(){const a=e(0),t=e(0),l=e(""),s=e([]),o=e([]),d=e([]),i=e([]),n=e([]),u=e({type:"bar",title:{text:"最近一周备份状况"},xRorate:25,labels:s.value,datasets:[{label:"成功",fillColor:"rgba(47,94,50,0.7)",data:o.value},{label:"失败",fillColor:"rgba(176,31,43,0.7)",data:d.value}]}),c=e({type:"line",title:{text:"最近一周备份成功率(%)"},labels:s.value,datasets:[{label:"成功",fillColor:"rgba(47,94,50,0.7)",data:i.value},{label:"失败",fillColor:"rgba(176,31,43,0.7)",data:n.value}]}),p=()=>{v().then((e=>{"0"===e.code?(a.value=e.result.dataSourceSize,t.value=e.result.runningJobSize,l.value=g(e.result.countFileSize),u.value.labels=e.result.dateList,u.value.datasets[0].data=e.result.optionsSuccess,u.value.datasets[1].data=e.result.optionsFail,c.value.labels=e.result.dateList,c.value.datasets[0].data=e.result.options2Success,c.value.datasets[1].data=e.result.options2Fail):r.error("获取Dashboard数据失败："+e.message)}))};p();const g=a=>{if(!a)return"";var e=1024;return a<e?a+"B":a<Math.pow(e,2)?(a/e).toFixed(2)+"KB":a<Math.pow(e,3)?(a/Math.pow(e,2)).toFixed(2)+"MB":a<Math.pow(e,4)?(a/Math.pow(e,3)).toFixed(2)+"G":(a/Math.pow(e,4)).toFixed(2)+"T"};return{countFileSize:l,runningJobSize:t,dataSourceSize:a,options:u,options2:c,getData:p}}},f=a=>(u("data-v-9bced422"),a=a(),c(),a),h={class:"grid-content grid-con-1"},b=f((()=>i("i",{class:"el-icon-coin grid-con-icon"},null,-1))),_={class:"grid-cont-right"},S={class:"grid-num"},m=f((()=>i("div",null,"数据源个数",-1))),w={class:"grid-content grid-con-2"},x=f((()=>i("i",{class:"el-icon-files grid-con-icon"},null,-1))),y={class:"grid-cont-right"},z={class:"grid-num"},F=f((()=>i("div",null,"运行中的备份任务",-1))),M={class:"grid-content grid-con-3"},j=f((()=>i("i",{class:"el-icon-cloudy grid-con-icon"},null,-1))),C={class:"grid-cont-right"},B={class:"grid-num"},D=f((()=>i("div",null,"总备份文件大小",-1)));var I=p(g,[["render",function(a,e,r,u,c,v){const p=t("el-card"),g=t("el-col"),f=t("el-row"),I=t("schart");return l(),s("div",null,[o(f,null,{default:d((()=>[o(g,null,{default:d((()=>[o(f,{gutter:20,class:"mgb20"},{default:d((()=>[o(g,{span:8},{default:d((()=>[o(p,{shadow:"hover","body-style":{padding:"0px"}},{default:d((()=>[i("div",h,[b,i("div",_,[i("div",S,n(u.dataSourceSize),1),m])])])),_:1})])),_:1}),o(g,{span:8},{default:d((()=>[o(p,{shadow:"hover","body-style":{padding:"0px"}},{default:d((()=>[i("div",w,[x,i("div",y,[i("div",z,n(u.runningJobSize),1),F])])])),_:1})])),_:1}),o(g,{span:8},{default:d((()=>[o(p,{shadow:"hover","body-style":{padding:"0px"}},{default:d((()=>[i("div",M,[j,i("div",C,[i("div",B,n(u.countFileSize),1),D])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(f,{gutter:20},{default:d((()=>[o(g,{span:12},{default:d((()=>[o(p,{shadow:"hover"},{default:d((()=>[o(I,{ref:"bar",class:"schart",canvasId:"bar",options:u.options},null,8,["options"])])),_:1})])),_:1}),o(g,{span:12},{default:d((()=>[o(p,{shadow:"hover"},{default:d((()=>[o(I,{ref:"line",class:"schart",canvasId:"line",options:u.options2},null,8,["options"])])),_:1})])),_:1})])),_:1})])}],["__scopeId","data-v-9bced422"]]);export{I as default};
